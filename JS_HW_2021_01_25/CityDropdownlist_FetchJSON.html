<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <select id="cityOption"></select>
    <select id="districtOption" disabled></select>

    <input type="submit" value="提交資料" onclick="submitData()" disabled>
    <div id='msg'></div>

    <script>
        const url = 'https://raw.githubusercontent.com/apprunner/FileStorage/master/TaiwanAddress.json'
        const citySelect = document.querySelector('#cityOption')
        const districtSelect = document.querySelector('#districtOption')
        const input = document.querySelector('input')

        window.onload = function () {
            fetchJSON(url)
            citySelect.onchange = citySelectChange
            const optionDistrict = document.createElement('option')
            const optionCity = document.createElement('option')
            optionDistrict.innerText = '---請選擇---'
            optionCity.innerText = '---請選擇---'
            citySelect.add(optionDistrict, 0)
            districtSelect.add(optionCity, 0)

        }

        let cityNameArr = [], zipCodeDistrict = []

        function fetchJSON(urlPath) {
            fetch(urlPath)
                .then(response => response.json())
                .then(result => {
                    result.forEach(item => {
                        const option = document.createElement('option')
                        option.innerText = item.CityName
                        citySelect.append(option)
                        cityNameArr.push(item)
                    });

                })
        }

        function citySelectChange() {
            districtOption.disabled = false
            let nowSelectCity = citySelect.selectedOptions[0].innerText
            districtSelect.length = 1
            let nowArr = cityNameArr.filter(x => x.CityName == nowSelectCity)[0]
            nowArr.AreaList.forEach(item => {
                const option = document.createElement('option')
                option.innerText = `${item.ZipCode}-${item.AreaName}`
                districtSelect.append(option)
            })

            input.disabled = false

        }
        function submitData() {
            alert(`${citySelect.selectedOptions[0].innerText}  ${districtSelect.selectedOptions[0].innerText}`)
        }



    </script>
</body>

</html>